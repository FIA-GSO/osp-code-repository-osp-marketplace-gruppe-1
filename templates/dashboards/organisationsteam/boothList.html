<!doctype html>
<html>
<head>
  <link rel="stylesheet" href="static/bootstrap/css/bootstrap.min.css">
  <script src="static/bootstrap/js/bootstrap.min.js"></script>
  <style>
    .event-block { display: none; }
    .event-block.active { display: block; }
  </style>
</head>
<body>
  <div class="container">
    <select id="eventSelect">
    {% for event in events %}
        <option {% if loop.first %}selected{% endif %} value="{{ event.uid }}">{{ event.date }}</option>
    {% endfor %}
    </select>

    {% for event in events %}
    <div class="event-block" data-uid="{{ event.uid }}">
      <div>
        {% if eventBooths[event.uid] %}
        <h6>Stände</h6>
          {% for eventBooth in eventBooths[event.uid] %}
            <div>
              Vorname: <span>{{ eventBooth.first_name }}</span>
              <br>
              Nachanme: <span>{{ eventBooth.last_name }}</span>
              <br>
              Status: <span>{{ eventBooth.status }}</span>
              <br>
              E-Mail: <span>{{ eventBooth.email }}</span>
              <br>
              Telefon: <span>{{ eventBooth.telephone }}</span>
              <br>
              Fax: <span>{{ eventBooth.fax }}</span>
              <br>
              Anmerkung: <span>{{ eventBooth.note }}</span>
              <br>
              Tische: <span>{{ eventBooth.table_count }}</span>
              <br>
              Stühle: <span>{{ eventBooth.chair_count }}</span>
            </div>
            <form action="{{ url_for('boothsAccept', uid=eventBooth.uid) }}" method="post">
              <button>Annehmen</button>
            </form>
            <form action="{{ url_for('boothsReject', uid=eventBooth.uid) }}" method="post">
              <button>Ablehnen</button>
            </form>
            <li>{{ eventBooth }}</li>
          {% endfor %}
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>

  <script>
    (function(){
      const select = document.getElementById('eventSelect');
      const blocks = document.querySelectorAll('.event-block');

      function showUid(uid) {
        blocks.forEach(b => {
          if (!uid) {
            b.classList.remove('active');
          } else {
            b.classList.toggle('active', b.dataset.uid === uid);
          }
        });
      }

      select.addEventListener('change', e => {
        showUid(e.target.value);
      });
      showUid(select.value);
    })();
  </script>
</body>
</html>
